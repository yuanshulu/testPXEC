(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{355:function(t,e,n){"use strict";n.r(e);var o=n(7),r=(n(54),n(41),n(65),{name:"Login",layout:"plat",data:function(){return{loading:!1,account:"",password:""}},methods:{login:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.account){e.next=3;break}return t.$refs.account.$el.getElementsByTagName("input")[0].focus(),e.abrupt("return");case 3:if(""!==t.password){e.next=6;break}return t.$refs.password.$el.getElementsByTagName("input")[0].focus(),e.abrupt("return");case 6:return t.loading=!0,e.prev=7,e.next=10,t.$api.login({email:t.account,password:t.password});case 10:"0000"===(n=e.sent).code&&(o={access_token:n.data.access_token,refresh_token:n.data.refresh_token},window.localStorage.setItem("pxec.backend.auth",JSON.stringify(o)),t.loading=!1,t.$router.replace({name:"index"})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0),t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))()}}}),c=n(12),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-app flex-row align-items-center"},[n("CContainer",[n("CRow",{staticClass:"justify-content-center"},[n("CCol",{attrs:{md:"8"}},[n("CCardGroup",[n("CCard",{staticClass:"p-4"},[n("CCardBody",[n("CForm",[n("h1",[t._v("圈團後臺管理")]),t._v(" "),n("p",{staticClass:"text-muted",staticStyle:{display:"none"}},[t._v("\n                  Sign In to your account\n                ")]),t._v(" "),n("CInput",{ref:"account",attrs:{placeholder:"登入帳號",autocomplete:"username email"},scopedSlots:t._u([{key:"prepend-content",fn:function(){return[n("CIcon",{attrs:{name:"cil-user"}})]},proxy:!0}]),model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),t._v(" "),n("CInput",{ref:"password",attrs:{placeholder:"密碼",type:"password",autocomplete:"curent-password"},scopedSlots:t._u([{key:"prepend-content",fn:function(){return[n("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("CRow",[n("CCol",{staticClass:"text-left",attrs:{col:"6"}},[n("CButton",{staticClass:"px-4",attrs:{color:"primary"},on:{click:function(e){return t.login()}}},[t._v("登入")])],1),t._v(" "),n("CCol",{staticClass:"text-right",attrs:{col:"6"}},[n("CButton",{staticClass:"px-0",attrs:{color:"link"}},[t._v("忘記密碼?")])],1)],1)],1),t._v(" "),t.loading?n("CElementCover"):t._e()],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);